<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>Friend Finder</title>
</head>
<body>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
</body>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
        <div class="jumbotron jumbotron-fluid">
          <div class="container">
            <h1>Questionnaire</h1>
            <h3 class="display-4">Answer the questions using a scale of 1 (strongly disagree) to 5 (strongly agree)</h3>
          </div>
        </div>
    </div>
    </div>

    <div class="row" >
        <div class="col-lg-2" id="spacer"></div>
        <div class="col-lg-8">

        <div class="card">
            <!-- <div class="panel-heading">
                <h2 class="panel-title"><strong>About You</strong></h2>
              </div> -->

              <div class="card-body">
                  <h2>Tell Us About You!</h2>
                  <hr>

                <form method="POST" role="form">

                  <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" required>
                  </div>

                  <div class="form-group">
                    <label for="age">Age</label>
                    <input type="text" class="form-control" id="age" required>
                  </div>
                </form>
            </div>


            <div class="card-body">
                <h2>Questions</h2>
                <hr>
                <div class="form-group">

                    <label for="question-1"><h4>#1. Your mind is always buzzing with unexplored ideas and plans.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q1" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q1" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q1" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q1" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q1" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-2"><h4>#2. You like to perform impromptu a capella concerts at Target.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q2" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q2" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q2" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q2" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q2" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-3"><h4>#3. You often will do something just out of sheer curiosity.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q3" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q3" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q3" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q3" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q3" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-4"><h4>#4. You prefer to read a good series instead of a one-off novel.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q4" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q4" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q4" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q4" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q4" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-5"><h4>#5. Adult is your beverage of choice.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q5" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q5" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q5" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q5" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q5" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-6"><h4>#6. You don't think in terms of the glass being half-full or half empty; you want to know what's in the glass.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q6" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q6" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q6" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q6" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q6" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-7"><h4>#7. You have perused Groupon in search of your next adventure.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q7" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q7" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q7" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q7" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q7" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-8"><h4>#8. You believe community activism and community service are two things everyone should engage in.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q8" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q8" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q8" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q8" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q8" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-9"><h4>#9. You take an active interest in the things that your friends are interested in.</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q9" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q9" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q9" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q9" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q9" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group">

                    <label for="question-10"><h4>#10. You would rather have another 8 years under "Dubya" than endure a full term with "45".</h4></label>
                    <div class="card-body" id="options">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q10" id="inlineRadio1" value="1"> 1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q10" id="inlineRadio2" value="2"> 2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q10" id="inlineRadio3" value="3" > 3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q10" id="inlineRadio4" value="4" > 4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="q10" id="inlineRadio5" value="5" > 5
                          </label>
                        </div>
                    </div>
                </div>


                <br>
                <div class="text-right" >
                      <button type="button" class="btn btn-secondary btn-md submit" id="add-btn"  data-toggle="modal" data-target="#myModal" >Find Friends</button>
                </div>
              </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="bestFriend">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="bestFriend">You've made a friend!</h4>
      </div>
      <div class="modal-body" id="friend-info">
                <h5 id="friend-name"></h5>
                <img id="friend-photo" src="" alt="Meet your new friend!">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
</body>
</html>


<!-- Front-end JavaScript-->
<!-- <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script> -->
<script type="text/javascript">

var allAnswers = [];

$(".submit").on("click", function(event){

    var newFriend = {
        name: $("#name").val().trim(),
        photo: $("#photo").val().trim(),

        answers: function(){
            for (i=1; i < 11; i++){
                var answer = $('input[name="q'+i+'"]:checked').val();
                allAnswers.push(parseInt(answer));
            }
            return allAnswers;
        }
    };

    console.log(newFriend);

    $.post("/api/friends", newFriend, function(data){

        if (data) {
            alert("Get ready to make new friends!");
        }
        else {
            alert("Uh-oh! Something went wrong with your survey!");
        }

        // clears the form on submit
        $("#name").val("");
        $("#photo").val("");
        $('input[type="radio"]').attr('checked', false);

    }).done(function() {
        // calls friends api
        $.ajax({
                url: "/api/friends",
                method: "GET",
                datatype: 'json'

        }).done(function(res, err) {
            if(err) {
                console.log(err);
            }
            // console.log(res);
            var current = res[res.length-1];
            // console.log(current);
            // stores new user's best match and displays to modal
            var bestFriend = current.bestie;
            console.log(bestFriend);
            $("#friend-name").text("Hi " + current.name + ", my name is " + bestFriend.name + "!");
            $("img#friend-photo").attr("src", bestFriend.photo);
        });

    }); // ENDS post.done()

}); // ENDS button onClick()
</script>

</html>